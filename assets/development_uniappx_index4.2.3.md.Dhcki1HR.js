import{_ as s,a,b as n,c as i,d as e,e as l,f as p,g as t,h as r,i as o,j as d,k as h,l as c,m as k,n as u,o as b}from"./chunks/HbuilderX-build-3.B_hMqLe4.js";import{_ as g,c as m,o as F,a8 as C}from"./chunks/framework.B7_706rU.js";const y="/blog/assets/android-sdk-project-1.DkshOrpp.png",_="/blog/assets/android-studio-sdk-1.CEl_2hDi.png",v="/blog/assets/android-studio-sdk1-1.B8AM5lrI.png",O=JSON.parse('{"title":"uni-app x android","description":"","frontmatter":{},"headers":[],"relativePath":"development/uniappx/index4.2.3.md","filePath":"development/uniappx/index4.2.3.md","lastUpdated":1724661625000}'),B={name:"development/uniappx/index4.2.3.md"},x=C(`<h1 id="uni-app-x-android" tabindex="-1">uni-app x android <a class="header-anchor" href="#uni-app-x-android" aria-label="Permalink to &quot;uni-app x android&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">环境版本</p><p>macOS Monterey12.2 Intel</p><p>HBuilderX 4.23</p><p>Android Studio Koala | 2024.1.1 Patch 1</p></div><p>官网地址: <a href="https://doc.dcloud.net.cn/uni-app-x/" target="_blank" rel="noreferrer">https://doc.dcloud.net.cn/uni-app-x/</a></p><p>官网参考: <a href="https://doc.dcloud.net.cn/uni-app-x/native/use/android.html" target="_blank" rel="noreferrer">https://doc.dcloud.net.cn/uni-app-x/native/use/android.html</a></p><h2 id="_1-java-环境切换-废弃" tabindex="-1">1. java 环境切换（废弃） <a class="header-anchor" href="#_1-java-环境切换-废弃" aria-label="Permalink to &quot;1. java 环境切换（废弃）&quot;">​</a></h2><ol><li><p>安装不同版本<code>java</code>，具体步骤省略</p></li><li><p>查看<code>bash_profile</code></p></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bash_profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export NVM_DIR=&quot;$HOME/.nvm&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot; # This loads nvm</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=&quot;/Users/jasvtfvan/Documents/FullStack/flutter/bin:$PATH&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PUB_HOSTED_URL=https://pub.flutter-io.cn</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export FLUTTER_STORAGE_BASE_UUL=https://storage.flutter-io.cn</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export ANDROID_HOME=$HOME/Library/Android/sdk</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$PATH:$ANDROID_HOME/tools</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$PATH:$ANDROID_HOME/tools/bin</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$PATH:$ANDROID_HOME/platform-tools</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$PATH:$ANDROID_HOME/emulator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export JMETER_HOME=/Users/jasvtfvan/Documents/PortableApplication/apache-jmeter-5.4</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export JAVA_8_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export JAVA_17_HOME=/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$JAVA_HOME/bin:$PATH:.:$JMETER_HOME/bin:$PATH</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JMETER_HOME/lib/ext/ApacheJMeter_core.jar:$JMETER_HOME/lib/jorphan.jar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias jdk8=&#39;export JAVA_HOME=$JAVA_8_HOME&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias jdk17=&#39;export JAVA_HOME=$JAVA_17_HOME&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export MAVEN_HOME=/Users/jasvtfvan/Documents/PortableApplication/apache-maven-3.8.5</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export PATH=$PATH:$MAVEN_HOME/bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias open_proxy=&#39;export https_proxy=http://127.0.0.1:7897 http_proxy=http://127.0.0.1:7897 all_proxy=socks5://127.0.0.1:7897&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias close_proxy=&#39;unset http_proxy;unset https_proxy;unset all_proxy&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias test_proxy=&#39;curl -v google.com&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><blockquote><p><code>.bash_profile</code>和<code>.zshrc</code>相关权限说明,参考<code>node/nvm</code>和<code>go/gvm</code></p></blockquote><ol start="3"><li>查看<code>java</code>版本并切换至<code>java8</code></li></ol><p>可以不必切换到<code>java8</code></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jdk8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">java version &quot;1.8.0_181&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Java(TM) SE Runtime Environment (build 1.8.0_181-b13)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_2-hbuilderx-创建项目" tabindex="-1">2. HBuilderX 创建项目 <a class="header-anchor" href="#_2-hbuilderx-创建项目" aria-label="Permalink to &quot;2. HBuilderX 创建项目&quot;">​</a></h2><h3 id="_2-1-下载安装" tabindex="-1">2.1 下载安装 <a class="header-anchor" href="#_2-1-下载安装" aria-label="Permalink to &quot;2.1 下载安装&quot;">​</a></h3><p>官网地址: <a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noreferrer">https://www.dcloud.io/hbuilderx.html</a></p><p>历史版本: <a href="https://hx.dcloud.net.cn/Tutorial/HistoryVersion" target="_blank" rel="noreferrer">https://hx.dcloud.net.cn/Tutorial/HistoryVersion</a></p><p>下载<code>4.2.3</code>版本</p><h3 id="_2-2-创建uni-app-x项目" tabindex="-1">2.2. 创建<code>uni-app x</code>项目 <a class="header-anchor" href="#_2-2-创建uni-app-x项目" aria-label="Permalink to &quot;2.2. 创建\`uni-app x\`项目&quot;">​</a></h3><p><img src="`+s+'" alt="创建项目" loading="lazy"></p><p>绑定开发者账户后，自动生成<code>Appid</code>，并在开发者中心可以查看</p><h3 id="_2-3-生成打包资源" tabindex="-1">2.3. 生成打包资源 <a class="header-anchor" href="#_2-3-生成打包资源" aria-label="Permalink to &quot;2.3. 生成打包资源&quot;">​</a></h3><p><img src="'+a+'" alt="创建项目" loading="lazy"></p><p><img src="'+n+'" alt="创建项目" loading="lazy"></p><h2 id="_3-开发者中心" tabindex="-1">3. 开发者中心 <a class="header-anchor" href="#_3-开发者中心" aria-label="Permalink to &quot;3. 开发者中心&quot;">​</a></h2><p>官网地址: <a href="https://dev.dcloud.net.cn" target="_blank" rel="noreferrer">https://dev.dcloud.net.cn</a></p><h3 id="_3-1-管理应用" tabindex="-1">3.1. 管理应用 <a class="header-anchor" href="#_3-1-管理应用" aria-label="Permalink to &quot;3.1. 管理应用&quot;">​</a></h3><p>分别点击: 应用管理 -&gt; 我的应用 -&gt; 应用名称</p><p><img src="'+i+'" alt="应用名称" loading="lazy"></p><h3 id="_3-2-创建云端证书" tabindex="-1">3.2. 创建云端证书 <a class="header-anchor" href="#_3-2-创建云端证书" aria-label="Permalink to &quot;3.2. 创建云端证书&quot;">​</a></h3><p><img src="'+e+'" alt="创建证书" loading="lazy"></p><p>创建完成后，点击<code>证书详情</code> -&gt; <code>查看证书密码</code> -&gt; <code>下载证书</code></p><h3 id="_3-3-生成离线打包key" tabindex="-1">3.3. 生成离线打包key <a class="header-anchor" href="#_3-3-生成离线打包key" aria-label="Permalink to &quot;3.3. 生成离线打包key&quot;">​</a></h3><ol><li>新增</li></ol><p><img src="'+l+'" alt="生成离线key" loading="lazy"></p><ol start="2"><li>创建</li></ol><p><img src="'+p+'" alt="生成离线key" loading="lazy"></p><ol start="3"><li>查看</li></ol><p><img src="'+t+'" alt="生成离线key" loading="lazy"></p><h2 id="_4-离线android项目" tabindex="-1">4. 离线Android项目 <a class="header-anchor" href="#_4-离线android项目" aria-label="Permalink to &quot;4. 离线Android项目&quot;">​</a></h2><h3 id="_4-1-导入android-studio" tabindex="-1">4.1. 导入<code>Android Studio</code> <a class="header-anchor" href="#_4-1-导入android-studio" aria-label="Permalink to &quot;4.1. 导入`Android Studio`&quot;">​</a></h3><ol><li>下载地址: <a href="https://nativesupport.dcloud.net.cn/AppDocs/download/android.html" target="_blank" rel="noreferrer">https://nativesupport.dcloud.net.cn/AppDocs/download/android.html</a></li></ol><blockquote><p>注意，下载的版本号需要跟<code>HBuilderX</code>版本号一致</p></blockquote><ol start="2"><li>导入项目，目录如下</li></ol><p><img src="'+y+'" alt="SDK目录" loading="lazy"></p><ol start="3"><li>修改<code>app</code>的<code>sdk</code>版本</li></ol><p><img src="'+_+'" alt="SDK版本" loading="lazy"></p><p>这里<code>compileSdk</code>要切换到最高版本，然后<code>Apply</code></p><p><img src="'+v+`" alt="SDK版本" loading="lazy"></p><p>所有<code>Module</code>都需要参考app进行修改</p><h3 id="_4-2-拷贝基础库包" tabindex="-1">4.2. 拷贝基础库包 <a class="header-anchor" href="#_4-2-拷贝基础库包" aria-label="Permalink to &quot;4.2. 拷贝基础库包&quot;">​</a></h3><p>将<code>Android-SDK@4.23.82121_20240704/SDK/libs/</code>目录下的 和<code>Android-uni-app-x-SDK@12048-4.24/SDK/libs/</code>目录下的</p><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">// android-gif-drawable-1.2.28.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">app-common-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">app-runtime-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">// breakpad-build-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dcloud-layout-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">framework-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-exit-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getAccessibilityInfo-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getAppAuthorizeSetting-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getAppBaseInfo-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getDeviceInfo-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getSystemInfo-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-getSystemSetting-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-openAppAuthorizeSetting-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-prompt-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-storage-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uts-runtime-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-rpx2px-release.aar</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uni-theme-release.aar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>拷贝到<code>app/libs/</code>目录下，删除<code>utsplugin-release.aar</code></p><p>点击<code>File -&gt; Sync Project With Gradle Files</code></p><h3 id="_4-3-uniappx-test工程配置" tabindex="-1">4.3. <code>uniappx-test</code>工程配置 <a class="header-anchor" href="#_4-3-uniappx-test工程配置" aria-label="Permalink to &quot;4.3. \`uniappx-test\`工程配置&quot;">​</a></h3><ol><li>创建模块</li></ol><p>分别点击: File -&gt; New -&gt; New Module... -&gt; Android Library</p><p><img src="`+r+'" alt="SDK版本" loading="lazy"></p><div class="info custom-block"><p class="custom-block-title">选项信息</p><p>Module Name: uniappx-test</p><p>Package Name: com.example.uniappx_test</p><p>Language: Kotlin</p><p>Bytecode Level: 8</p><p>Minimum SDK: 21</p><p>Build configuration language: Groovy DSL(build.gradle)</p></div><blockquote><p><code>Package Name</code>要跟开发者中心的包名一致</p></blockquote><blockquote><p>uniappx-test最低支持版本为21，Minimum SDK需要选择21及以上的版本</p></blockquote><ol start="2"><li>配置<code>build.gradle</code>基本信息</li></ol><p>修改uniappx-test模块下的build.gradle</p><p><img src="'+o+`" alt="build.gradle" loading="lazy"></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">android</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    defaultConfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        minSdk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        testInstrumentationRunner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;androidx.test.runner.AndroidJUnitRunner&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        consumerProguardFiles</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;consumer-rules.pro&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        versionCode</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        versionName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1.0.0&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> noinspection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ExpiredTargetSdkVersion</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        targetSdk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">repositories</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    flatDir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        dirs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;libs&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    compileOnly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fileTree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dir:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../app/libs&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> include:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*.aar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>修改后点击<code>build.gradle</code>右上角的<code>Sync</code></p><blockquote><p>注意：使用<code>noinspection ExpiredTargetSdkVersion</code>忽略Google Play的报错，创建虚拟机时，不要创建<code>Google APIs</code>的 所有<code>Module</code>的<code>build.gradle</code>都要添加该注释</p></blockquote><h3 id="_4-4-拷贝资源文件" tabindex="-1">4.4. 拷贝资源文件 <a class="header-anchor" href="#_4-4-拷贝资源文件" aria-label="Permalink to &quot;4.4. 拷贝资源文件&quot;">​</a></h3><ol><li>从<code>HBuilderX</code>拷贝静态资源到app主模块</li></ol><p><img src="`+d+'" alt="拷贝静态资源" loading="lazy"></p><blockquote><p>拷贝的文件夹要与<code>AndroidManifest.xml</code>中的<code>DCLOUD_UNI_APPID</code>的值保持一致</p></blockquote><ol start="2"><li>从<code>HBuilderX</code>拷贝<code>kotlin</code>代码到<code>uniappx-test</code>模块下</li></ol><p><img src="'+h+`" alt="拷贝kotlin代码" loading="lazy"></p><blockquote><p>注意：不要破环java下原有目录结构</p></blockquote><h3 id="_4-5-app主模块依赖更新" tabindex="-1">4.5. <code>app主模块</code>依赖更新 <a class="header-anchor" href="#_4-5-app主模块依赖更新" aria-label="Permalink to &quot;4.5. \`app主模块\`依赖更新&quot;">​</a></h3><ul><li>将<code>uniappx-test</code>添加到<code>app主模块</code>依赖</li></ul><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dependencies {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    implementation project(&#39;:uniappx-test&#39;)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-6-打包apk" tabindex="-1">4.6. 打包apk <a class="header-anchor" href="#_4-6-打包apk" aria-label="Permalink to &quot;4.6. 打包apk&quot;">​</a></h3><ol><li>app主模块<code>build.gradle</code></li></ol><p>从开发者中心下载证书，获取相关信息，保存到项目根目录</p><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">android {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    defaultConfig {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        applicationId &quot;com.example.uniappx_test&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    signingConfigs {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        config {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            keyAlias &#39;__uni__d2ff1d0&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            keyPassword &#39;开发者中心证书详情里拿到&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            storeFile file(&#39;../__UNI__D2FF1D0.keystore&#39;)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            storePassword &#39;同keyPassword&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            v1SigningEnabled true //兼容v1</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            v2SigningEnabled true //兼容v2</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    buildTypes {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            debug {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                signingConfig signingConfigs.config</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            release {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                signingConfig signingConfigs.config</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ol start="2"><li>app主模块<code>Androidmanifest.xml</code></li></ol><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;meta-data android:name=&quot;DCLOUD_UNI_APPID&quot; android:value=&quot;__UNI__D2FF1D0&quot; /&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;meta-data android:name=&quot;dcloud_appkey&quot; android:value=&quot;开发者中心的离线打包key&quot; /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>app主模块<code>dcloud_control.xml</code></li></ol><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;hbuilder&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;apps&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &lt;app appid=&quot;__UNI__D2FF1D0&quot; appver=&quot;&quot;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;/apps&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&lt;/hbuilder&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="4"><li>studio打包</li></ol><p><code>Build</code> -&gt; <code>Generate Signed App Bundle / APK</code> -&gt; <code>APK</code> -&gt; 下图 -&gt; Next -&gt; Release</p><p><img src="`+c+`" alt="keystore" loading="lazy"></p><ol start="5"><li>打包后apk所在路径</li></ol><p><code>/app/release/app-release.apk</code></p><h2 id="_5-hbuilderx-云打包" tabindex="-1">5. HBuilderX 云打包 <a class="header-anchor" href="#_5-hbuilderx-云打包" aria-label="Permalink to &quot;5. HBuilderX 云打包&quot;">​</a></h2><h3 id="_5-1-生成-keystore" tabindex="-1">5.1. 生成<code>.keystore</code> <a class="header-anchor" href="#_5-1-生成-keystore" aria-label="Permalink to &quot;5.1. 生成\`.keystore\`&quot;">​</a></h3><ol><li>查看<code>jdk</code>地址</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/libexec/java_home</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-console vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Matching Java Virtual Machines (3):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    17.0.10 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java SE 17.0.10&quot; /Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    1.8.181.13 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java&quot; /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    1.8.0_181 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>进入<code>JDK</code>所在目录</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>输入命令生成<code>.keystore</code></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keytool</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -genkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AAAAAA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -keyalg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RSA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -validity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 36500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -keysize</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -keystore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java8.keystore</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看密钥信息(123456)</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> keytool</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -keystore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java8.keystore</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_5-2-选择发行" tabindex="-1">5.2. 选择发行 <a class="header-anchor" href="#_5-2-选择发行" aria-label="Permalink to &quot;5.2. 选择发行&quot;">​</a></h3><p><img src="`+k+'" alt="build-1" loading="lazy"></p><h3 id="_5-3-选择证书" tabindex="-1">5.3. 选择证书 <a class="header-anchor" href="#_5-3-选择证书" aria-label="Permalink to &quot;5.3. 选择证书&quot;">​</a></h3><p>当前选择<code>自定义证书</code>，也可以选择<code>云证书</code>（在开发者中心查看）</p><p><img src="'+u+'" alt="build-2" loading="lazy"></p><h3 id="_5-4-下载apk" tabindex="-1">5.4. 下载<code>apk</code> <a class="header-anchor" href="#_5-4-下载apk" aria-label="Permalink to &quot;5.4. 下载`apk`&quot;">​</a></h3><p><img src="'+b+'" alt="build-3" loading="lazy"></p><h2 id="_6-开发调试" tabindex="-1">6. 开发调试 <a class="header-anchor" href="#_6-开发调试" aria-label="Permalink to &quot;6. 开发调试&quot;">​</a></h2><h3 id="_6-1-hbuilderx-真机调试" tabindex="-1">6.1. HBuilderX 真机调试 <a class="header-anchor" href="#_6-1-hbuilderx-真机调试" aria-label="Permalink to &quot;6.1. HBuilderX 真机调试&quot;">​</a></h3><ul><li><code>android掌上学习机</code>(android5.1.1)</li></ul><ol><li><p>android手机 Settings-&gt;System-&gt;Developer options-&gt;开启顶部总开关(On)-&gt;Debugging-&gt;开启USB debugging</p></li><li><p>HBuilderX 选中项目-&gt;运行-&gt;运行到手机或模拟器-&gt;运行到Android App基座</p></li></ol><ul><li><code>华为手机</code></li></ul><ol><li>android手机</li></ol><p>手机设置-&gt;关于手机-&gt;版本号（连点2-7下开启开发者模式）</p><p>手机设置-&gt;系统和更新-&gt;开发人员选项-&gt;开发人员选项/USB调试</p><ol start="2"><li><p>MAC连接<code>android</code>设备，安装驱动助手（如：华为荣耀，安装手机助手） 根据步骤一步步连接</p></li><li><p>MAC打开<code>关于本机</code>-&gt;<code>系统报告</code>-&gt;<code>硬件/USB</code>-&gt;<code>USB 3.1 总线</code> 找到华为设备，复制<code>厂商ID</code></p></li><li><p>打开MAC终端，输入命令</p></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0x12d1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.android/adb_usb.ini</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="5"><li><p>重启adb（HBuilderX）</p></li><li><p>HBuilderX 选中项目-&gt;运行-&gt;运行到手机或模拟器-&gt;运行到Android App基座</p></li><li><p>重启adb（HBuilderX）</p></li></ol><h3 id="_6-2-hbuilderx引入原生插件" tabindex="-1">6.2. HBuilderX引入原生插件 <a class="header-anchor" href="#_6-2-hbuilderx引入原生插件" aria-label="Permalink to &quot;6.2. HBuilderX引入原生插件&quot;">​</a></h3><ol><li>配置依赖</li></ol>',122),q=[x];function E(A,f,H,P,M,D){return F(),m("div",null,q)}const T=g(B,[["render",E]]);export{O as __pageData,T as default};
